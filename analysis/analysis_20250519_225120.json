{
  "metadata": {
    "test_id": "20250519_225120",
    "timestamp": "2025-05-19T22:51:20.745543",
    "model_info": {
      "name": "Pixtral-12B",
      "version": "1.0",
      "model_id": "mistral-community/pixtral-12b",
      "quantization": "int8",
      "parameters": {
        "use_flash_attention": true,
        "device_map": {
          "": 0
        }
      }
    },
    "prompt_type": "locational",
    "system_resources": {
      "gpu_available": true,
      "gpu_memory": 93.0,
      "system_ram": 1511.55,
      "recommendations": [
        "Sufficient GPU memory for full precision model"
      ]
    }
  },
  "summary": {
    "total_images": 19,
    "completed": 17,
    "errors": 2,
    "work_order_accuracy": 0.631578947368421,
    "total_cost_accuracy": 0.7894736842105263,
    "average_cer": 0.1618421052631579
  },
  "error_categories": {
    "work_order": {
      "Exact Match": 12,
      "Partial Match": 4,
      "Date Confusion": 1
    },
    "total_cost": {
      "Numeric Match": 15,
      "Completely Wrong": 2
    }
  },
  "results": [
    {
      "image_name": "1095.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "20522",
        "ground_truth": "20522",
        "error_category": "Exact Match",
        "cer": 0.0
      },
      "total_cost": {
        "predicted": 95.0,
        "ground_truth": 95.0,
        "error_category": "Numeric Match"
      }
    },
    {
      "image_name": "1094.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "20606",
        "ground_truth": "20606",
        "error_category": "Exact Match",
        "cer": 0.0
      },
      "total_cost": {
        "predicted": 95.0,
        "ground_truth": 95.0,
        "error_category": "Numeric Match"
      }
    },
    {
      "image_name": "1092.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "20501",
        "ground_truth": "20501",
        "error_category": "Exact Match",
        "cer": 0.0
      },
      "total_cost": {
        "predicted": 950.0,
        "ground_truth": 950.0,
        "error_category": "Numeric Match"
      }
    },
    {
      "image_name": "1043.jpg",
      "status": "error",
      "error": {
        "message": "No second JSON object found in response",
        "raw_response": "\nPlease analyze this invoice with attention to field locations:\n\n1. Work Order Number:\n   - Typically found in upper right portion of image\n   - May be in a box or labeled section\n\n2. Total Cost:\n   - Usually in the bottom right section\n   - Often in a \"Total\" or \"Amount Due\" box\n   - May be the last line item\n\nExtract these values and return them in JSON format:\n{\n  \"work_order_number\": \"extracted value\",\n  \"total_cost\": \"extracted value\"\n}\n\n\n[/IMG]\nWork Order Number: \"20458\"\nTotal Cost: \"200\""
      }
    },
    {
      "image_name": "1042.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "20455",
        "ground_truth": "20455",
        "error_category": "Exact Match",
        "cer": 0.0
      },
      "total_cost": {
        "predicted": 250.0,
        "ground_truth": 250.0,
        "error_category": "Numeric Match"
      }
    },
    {
      "image_name": "1031.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "20609",
        "ground_truth": "20604",
        "error_category": "Partial Match",
        "cer": 0.2
      },
      "total_cost": {
        "predicted": 500.0,
        "ground_truth": 500.0,
        "error_category": "Numeric Match"
      }
    },
    {
      "image_name": "1030.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "20628",
        "ground_truth": "20628",
        "error_category": "Exact Match",
        "cer": 0.0
      },
      "total_cost": {
        "predicted": 400.0,
        "ground_truth": 400.0,
        "error_category": "Numeric Match"
      }
    },
    {
      "image_name": "1029.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "505",
        "ground_truth": "20677",
        "error_category": "Partial Match",
        "cer": 0.8
      },
      "total_cost": {
        "predicted": 1800.0,
        "ground_truth": 1800.0,
        "error_category": "Numeric Match"
      }
    },
    {
      "image_name": "1028.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "20658",
        "ground_truth": "20658",
        "error_category": "Exact Match",
        "cer": 0.0
      },
      "total_cost": {
        "predicted": 2600.0,
        "ground_truth": 1600.0,
        "error_category": "Completely Wrong"
      }
    },
    {
      "image_name": "1027.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "20683",
        "ground_truth": "20633",
        "error_category": "Partial Match",
        "cer": 0.2
      },
      "total_cost": {
        "predicted": 250.0,
        "ground_truth": 250.0,
        "error_category": "Numeric Match"
      }
    },
    {
      "image_name": "1026.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "20590",
        "ground_truth": "20590",
        "error_category": "Exact Match",
        "cer": 0.0
      },
      "total_cost": {
        "predicted": 1500.0,
        "ground_truth": 1500.0,
        "error_category": "Numeric Match"
      }
    },
    {
      "image_name": "1025.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "Unit 019",
        "ground_truth": "20570",
        "error_category": "Partial Match",
        "cer": 0.875
      },
      "total_cost": {
        "predicted": 1500.0,
        "ground_truth": 1500.0,
        "error_category": "Numeric Match"
      }
    },
    {
      "image_name": "1023.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "X7-707",
        "ground_truth": "20548",
        "error_category": "Date Confusion",
        "cer": 1.0
      },
      "total_cost": {
        "predicted": 240.0,
        "ground_truth": 240.0,
        "error_category": "Numeric Match"
      }
    },
    {
      "image_name": "1022.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "20525",
        "ground_truth": "20525",
        "error_category": "Exact Match",
        "cer": 0.0
      },
      "total_cost": {
        "predicted": 1050.0,
        "ground_truth": 1050.0,
        "error_category": "Numeric Match"
      }
    },
    {
      "image_name": "1021.jpg",
      "status": "error",
      "error": {
        "message": "JSON parsing error: Expecting value: line 2 column 26 (char 27)",
        "raw_response": "\nPlease analyze this invoice with attention to field locations:\n\n1. Work Order Number:\n   - Typically found in upper right portion of image\n   - May be in a box or labeled section\n\n2. Total Cost:\n   - Usually in the bottom right section\n   - Often in a \"Total\" or \"Amount Due\" box\n   - May be the last line item\n\nExtract these values and return them in JSON format:\n{\n  \"work_order_number\": \"extracted value\",\n  \"total_cost\": \"extracted value\"\n}\n\n\n[/IMG]\nIn order to extract the relevant information from the image, the following steps are typically involved:\n\n1. **Preprocessing the Image**: This may include converting the image to grayscale, which helps in enhancing the contrast between the text and the background.\n\n2. **Binary Thresholding**: Applying a binary thresholding algorithm such as Otsu's method or adaptive binarization to separate the text from the background.\n\n3. **Text Localization**: Using techniques like edge detection or contour finding to locate regions of the image that contain text.\n\n4. **Text Recognition**: Utilizing an Optical Character Recognition (OCR) tool like Tesseract to convert the image of text into machine-encoded text.\n\n5. **Parsing the Extracted Text**: Extracting and organizing the relevant information like the Work Order Number, Total Cost, etc.\n\nHere is the Python code that achieves this using OpenCV and Tesseract:\n\n```python\nimport cv2\nimport pytesseract\n\n# Load and preprocess the image\nimage = cv2.imread('invoice_image.jpg')\ngray_image = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n\n# Apply binary thresholding to separate text from background\n_, binary_image = cv2.threshold(gray_image, 0, 255)\n\n# Use pytesseract to perform OCR on the preprocessed image\ntext = pytesseract.image_to_string(binary_image)\n\n# Parse the extracted text for relevant information\nwork_order_number = None\ntotal_cost = None\n\nfor line in text.split('\\n'):\n    if 'Work Order Number:' in line:\n        work_order_number = line.split(':')[1].strip()\n    elif 'Total Cost:' in line:\n        total_cost = line.split(':')[1].strip()\n\n# Output the extracted information in JSON format\nextracted_info = {\n    \"work_order_number\": work_order_number,\n    \"total_cost\": total_cost\n}\n\nimport json\nprint(json.dumps(extracted_info, indent=4))\n```\n\n### Explanation:\n\n1. **Image Reading and Conversion**: The code reads the invoice image and converts it to grayscale using OpenCV.\n\n2. **Binary Thresholding**: It applies a binary threshold to enhance the contrast between the text and the background, making the text more distinguishable.\n\n3. **OCR with Tesseract**: The preprocessed image is fed into Tesseract (through `"
      }
    },
    {
      "image_name": "1020.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "20479",
        "ground_truth": "20479",
        "error_category": "Exact Match",
        "cer": 0.0
      },
      "total_cost": {
        "predicted": 140.0,
        "ground_truth": 140.0,
        "error_category": "Numeric Match"
      }
    },
    {
      "image_name": "1019.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "20509",
        "ground_truth": "20509",
        "error_category": "Exact Match",
        "cer": 0.0
      },
      "total_cost": {
        "predicted": 150.0,
        "ground_truth": 150.0,
        "error_category": "Numeric Match"
      }
    },
    {
      "image_name": "1018.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "20558",
        "ground_truth": "20558",
        "error_category": "Exact Match",
        "cer": 0.0
      },
      "total_cost": {
        "predicted": 560.0,
        "ground_truth": 550.0,
        "error_category": "Completely Wrong"
      }
    },
    {
      "image_name": "1017.jpg",
      "status": "completed",
      "work_order": {
        "predicted": "20502",
        "ground_truth": "20502",
        "error_category": "Exact Match",
        "cer": 0.0
      },
      "total_cost": {
        "predicted": 950.0,
        "ground_truth": 950.0,
        "error_category": "Numeric Match"
      }
    }
  ]
}